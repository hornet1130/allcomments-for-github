(()=>{(function(){let n=["github.com"],i=2e3,d=20,a=/Load more|Show more replies|Show \d+ more replies/i,r=/\d+\s+(remaining|hidden)\s+(items|replies|comments)/i;chrome.storage.sync.get({allowedDomains:["github.com"],intervalMs:i,maxAttempts:d,loadButtonsPattern:a.source,hiddenItemsPattern:r.source},t=>{n=t.allowedDomains,n.includes("github.com")||n.unshift("github.com"),i=Number(t.intervalMs),d=Number(t.maxAttempts),a=new RegExp(t.loadButtonsPattern,"i"),r=new RegExp(t.hiddenItemsPattern,"i"),l()});function f(){let t=document.getElementById("gh-unhider-loading-toast");t||(t=document.createElement("div"),t.id="gh-unhider-loading-toast",Object.assign(t.style,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"8px 16px",borderRadius:"4px",zIndex:1e4,fontSize:"14px"}),document.body.appendChild(t)),t.textContent="Loading comments...",t.style.opacity="1"}function c(){let t=document.getElementById("gh-unhider-loading-toast");t&&t.remove()}let s=0,o=null;function p(){let t=window.location.host;return n.length>0&&!n.includes(t)?!1:/^\/[^\/]+\/[^\/]+\/issues\/\d+/.test(window.location.pathname)}function u(t){let e=document.getElementById("gh-unhider-toast");e||(e=document.createElement("div"),e.id="gh-unhider-toast",Object.assign(e.style,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"8px 16px",borderRadius:"4px",zIndex:1e4,fontSize:"14px",opacity:"0",transition:"opacity 0.3s"}),document.body.appendChild(e)),e.textContent=t,e.style.opacity="1",setTimeout(()=>{e.style.opacity="0"},1500)}function g(){if(document.getElementById("gh-unhider-btn"))return;let t=document.createElement("button");t.id="gh-unhider-btn",t.textContent="Show all comments",Object.assign(t.style,{position:"fixed",bottom:"20px",right:"20px",background:"#2ea44f",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",zIndex:1e4,boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}),t.addEventListener("click",y),document.body.appendChild(t)}function b(){return console.log("Finding load buttons..."),Array.from(document.querySelectorAll("button")).filter(t=>{let e=t.textContent?.trim();return e&&a.test(e)})}function m(){return Array.from(document.querySelectorAll("span, div")).some(t=>{let e=t.textContent?.trim();return e&&r.test(e)})}function x(){if(s>=d){clearInterval(o),c(),u("Reached maximum attempts.");return}let t=b();if(t.length===0){let e=m();if(console.log("Hidden items indicator:",e),m()){console.log("[Unhider] \uC544\uC9C1 \uC228\uACA8\uC9C4 \uCF54\uBA58\uD2B8\uAC00 \uB0A8\uC544\uC788\uC5B4 \uC7AC\uC2DC\uB3C4\uD569\uB2C8\uB2E4.");return}clearInterval(o),c(),u("All comments loaded!");return}t.forEach(e=>e.click()),s++}function y(){if(o)return;let t=document.getElementById("gh-unhider-btn");t&&(t.style.display="none"),f(),s=0,o=setInterval(x,i)}function l(){p()&&g()}let h=location.pathname;new MutationObserver(()=>{location.pathname!==h&&(h=location.pathname,l())}).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",l)})();})();
